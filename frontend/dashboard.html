<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CH Studio - Dashboard</title>
    <link rel="icon" type="image/png" href="/assets/Favicon.png">
    <link rel="stylesheet" href="styles/dashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <!-- Menu Lateral -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="/assets/LogoSiderBarAberta.png" alt="CH Studio" class="sidebar-logo sidebar-logo-open">
                <img src="/assets/LogoSiderBarFechada.png" alt="CH Studio" class="sidebar-logo sidebar-logo-collapsed">
            </div>
            
            <nav class="sidebar-nav">
                <ul class="nav-list">
                    <li class="nav-item active">
                        <a href="#dashboard" class="nav-link" data-page="dashboard">
                            <i class="fas fa-home"></i>
                            <span class="nav-text">Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#agenda" class="nav-link" data-page="agenda">
                            <i class="fas fa-calendar-alt"></i>
                            <span class="nav-text">Agenda</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#comissoes" class="nav-link" data-page="comissoes">
                            <i class="fas fa-money-bill-wave"></i>
                            <span class="nav-text">Minhas Comissões</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#estoque" class="nav-link" data-page="estoque">
                            <i class="fas fa-boxes"></i>
                            <span class="nav-text">Estoque</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#financeiro" class="nav-link" data-page="financeiro">
                            <i class="fas fa-chart-line"></i>
                            <span class="nav-text">Financeiro</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#profissionais" class="nav-link" data-page="profissionais">
                            <i class="fas fa-users"></i>
                            <span class="nav-text">Profissionais</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#servicos" class="nav-link" data-page="servicos">
                            <i class="fas fa-cogs"></i>
                            <span class="nav-text">Serviços</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#relatorios" class="nav-link" data-page="relatorios">
                            <i class="fas fa-chart-bar"></i>
                            <span class="nav-text">Relatórios</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#configuracoes" class="nav-link" data-page="configuracoes">
                            <i class="fas fa-cog"></i>
                            <span class="nav-text">Configurações</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <img src="/assets/Logo.png" alt="Avatar" id="userAvatarImg" style="display: none;">
                        <i class="fas fa-user" id="userAvatarIcon"></i>
                    </div>
                    <div class="user-details">
                        <span class="user-name" id="userName">Usuário</span>
                        <span class="user-role" id="userRole">Administrador</span>
                    </div>
                </div>
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </aside>

        <!-- Conteúdo Principal -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <div class="header-left">
                    <button class="sidebar-toggle" id="sidebarToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title" id="pageTitle">Dashboard</h1>
                </div>
                
                <div class="header-right">
                    <div class="notifications">
                        <button class="notification-btn">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge">3</span>
                        </button>
                    </div>
                    
                    <div class="user-menu">
                        <button class="user-menu-btn">
                            <div class="user-avatar-small">
                                <img src="/assets/Logo.png" alt="Avatar" id="userAvatarImgSmall" style="display: none;">
                                <i class="fas fa-user" id="userAvatarIconSmall"></i>
                            </div>
                            <span id="userNameSmall">Usuário</span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Conteúdo das Páginas -->
            <div class="content-area">
                <!-- Dashboard -->
                <div class="page-content active" id="dashboard-page">
                    <div class="welcome-section">
                        <h2>Bem-vindo ao CH Studio!</h2>
                        <p>Gerencie sua empresa de forma eficiente e profissional.</p>
                    </div>
                    
                </div>

                <!-- Agenda -->
                <div class="page-content" id="agenda-page">
                    <div class="page-header">
                        <h2>Agenda</h2>
                        <div class="date-filters">
                            <div class="filter-group">
                                <label for="agenda-date-from">Data Início</label>
                                <input type="date" id="agenda-date-from" placeholder="dd/mm/aaaa">
                            </div>
                            <div class="filter-group">
                                <label for="agenda-date-to">Data Fim</label>
                                <input type="date" id="agenda-date-to" placeholder="dd/mm/aaaa">
                            </div>
                            <button class="btn btn-primary" id="filter-agenda-dates">
                                <i class="fas fa-search"></i>
                                Filtrar
                            </button>
                            <button class="btn btn-secondary" id="clear-agenda-filters">
                                <i class="fas fa-times"></i>
                                Limpar
                            </button>
                        </div>
                    </div>

                    <!-- Cards de Estatísticas -->
                    <div class="agenda-stats">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-appointments">0</h3>
                                <p>Total de Agendamentos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon pending">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="pending-appointments">0</h3>
                                <p>Pendentes</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon confirmed">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="confirmed-appointments">0</h3>
                                <p>Confirmados</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon cancelled">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="cancelled-appointments">0</h3>
                                <p>Cancelados</p>
                            </div>
                        </div>
                    </div>

                    <!-- Abas de Agenda -->
                    <div class="agenda-tabs">
                        <div class="tab-buttons">
                            <button class="tab-btn active" data-tab="agendamentos">
                                <i class="fas fa-list"></i>
                                <span>Agendamentos</span>
                            </button>
                            <button class="tab-btn" data-tab="calendario">
                                <i class="fas fa-calendar"></i>
                                <span>Calendário</span>
                            </button>
                            <button class="tab-btn" data-tab="contatos">
                                <i class="fas fa-address-book"></i>
                                <span>Contatos</span>
                            </button>
                            <button class="tab-btn" data-tab="configuracao">
                                <i class="fas fa-globe"></i>
                                <span>Página Pública</span>
                            </button>
                            <button class="btn btn-primary" id="new-appointment-btn">
                                <i class="fas fa-plus"></i>
                                <span>Novo Agendamento</span>
                            </button>
                        </div>
                        
                        <!-- Conteúdo das Abas -->
                        <div class="tab-content">
                            <!-- Aba Agendamentos -->
                            <div class="tab-pane active" id="agendamentos-tab">
                                <div class="appointments-section">
                                    <div class="section-header">
                                        <h3>Gerenciar Agendamentos</h3>
                                        <div class="appointment-filters">
                                            <select id="professional-filter">
                                                <option value="">Todos os Profissionais</option>
                                            </select>
                                            <div class="search-box">
                                                <input type="text" id="appointment-search" placeholder="Buscar agendamento...">
                                                <i class="fas fa-search"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="appointments-list" id="appointments-list">
                                        <!-- Lista será carregada dinamicamente -->
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Aba Calendário -->
                            <div class="tab-pane" id="calendario-tab">
                                <div class="calendar-section">
                                    <div class="section-header">
                                        <h3>Visualização em Calendário</h3>
                                        <div class="calendar-actions">
                                            <button class="btn btn-secondary" id="prev-month">
                                                <i class="fas fa-chevron-left"></i>
                                                Mês Anterior
                                            </button>
                                            <span class="current-month" id="current-month">Carregando...</span>
                                            <button class="btn btn-secondary" id="next-month">
                                                Próximo Mês
                                                <i class="fas fa-chevron-right"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="calendar-container" id="calendar-container">
                                        <!-- Calendário será carregado dinamicamente -->
                                    </div>
                                </div>
                            </div>

                            <!-- Aba Contatos -->
                            <div class="tab-pane" id="contatos-tab">
                                <div class="contacts-section">
                                    <div class="section-header">
                                        <h3>Gerenciar Contatos</h3>
                                        <div class="contacts-actions">
                                            <button class="btn btn-primary" id="sync-contacts-btn">
                                                <i class="fas fa-sync-alt"></i>
                                                Sincronizar WhatsApp
                                            </button>
                                            <button class="btn btn-secondary" id="add-contact-btn">
                                                <i class="fas fa-plus"></i>
                                                Novo Contato
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Filtros e busca -->
                                    <div class="contacts-filters">
                                        <div class="search-box">
                                            <input type="text" id="contact-search" placeholder="Buscar contato...">
                                            <i class="fas fa-search"></i>
                                        </div>
                                        <select id="contact-source-filter">
                                            <option value="">Todas as origens</option>
                                            <option value="whatsapp">WhatsApp</option>
                                            <option value="manual">Manual</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Lista de contatos -->
                                    <div class="contacts-list" id="contacts-list">
                                        <!-- Lista será carregada dinamicamente -->
                                    </div>
                                    
                                    <!-- Paginação -->
                                    <div class="pagination" id="contacts-pagination">
                                        <!-- Paginação será carregada dinamicamente -->
                                    </div>
                                </div>
                            </div>

                            <!-- Aba Página Pública -->
                            <div class="tab-pane" id="configuracao-tab">
                                <div class="config-section">
                                    <h3>Página Pública da Agenda</h3>
                            <div class="public-page-section">
                                <div class="public-page-info">
                                    <i class="fas fa-globe"></i>
                                    <h3>Página Pública de Agendamentos</h3>
                                    <p>Os clientes podem agendar horários diretamente através da página pública, sem necessidade de login.</p>
                                </div>
                                <div class="public-page-actions">
                                    <a href="public-booking.html" target="_blank" class="btn btn-primary">
                                        <i class="fas fa-external-link-alt"></i>
                                        <span>Abrir Página Pública</span>
                                    </a>
                                    <button class="btn btn-secondary" onclick="copyPublicLink()">
                                        <i class="fas fa-copy"></i>
                                        <span>Copiar Link</span>
                                    </button>
                                </div>
                                <div class="public-page-stats">
                                    <div class="stat-item">
                                        <i class="fas fa-calendar-check"></i>
                                        <span>Agendamentos Online</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-mobile-alt"></i>
                                        <span>Responsivo</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-whatsapp"></i>
                                        <span>Confirmação via WhatsApp</span>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Minhas Comissões -->
                <div class="page-content" id="comissoes-page">
                    <div class="page-header">
                        <h2>Minhas Comissões</h2>
                        <button class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            Nova Comissão
                        </button>
                    </div>
                    <div class="empty-state">
                        <i class="fas fa-money-bill-wave"></i>
                        <h3>Minhas Comissões em desenvolvimento</h3>
                        <p>Esta funcionalidade será implementada em breve.</p>
                    </div>
                </div>

                <!-- Estoque -->
                <div class="page-content" id="estoque-page">
                    <div class="page-header">
                        <h2>Estoque</h2>
                        <button class="btn btn-primary" id="add-product-btn">
                            <i class="fas fa-plus"></i>
                            Novo Produto
                        </button>
                    </div>

                    <!-- Cards de Estatísticas -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-boxes"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-products">0</h3>
                                <p>Total de Produtos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon active">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="in-stock-products">0</h3>
                                <p>Em Estoque</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon inactive">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="low-stock-products">0</h3>
                                <p>Estoque Baixo</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon leave">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="out-of-stock-products">0</h3>
                                <p>Sem Estoque</p>
                            </div>
                        </div>
                    </div>

                    <!-- Gráfico de Estoque -->
                    <div class="chart-section">
                        <div class="section-header">
                            <h3>Nível de Estoque por Produto</h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="stockChart" width="400" height="200"></canvas>
                        </div>
                    </div>

                    <!-- Abas de Estoque -->
                    <div class="stock-tabs">
                        <div class="tab-buttons">
                            <button class="tab-btn active" data-tab="entrada">
                                <i class="fas fa-plus-circle"></i>
                                <span>Entrada</span>
                            </button>
                            <button class="tab-btn" data-tab="saida">
                                <i class="fas fa-minus-circle"></i>
                                <span>Saída</span>
                            </button>
                            <button class="tab-btn" data-tab="historico">
                                <i class="fas fa-history"></i>
                                <span>Histórico</span>
                            </button>
                            <button class="btn btn-primary" id="add-product-tab-btn">
                                <i class="fas fa-plus"></i>
                                <span>Novo Produto</span>
                            </button>
                        </div>
                        
                        <!-- Conteúdo das Abas -->
                        <div class="tab-content">
                            <!-- Aba Entrada -->
                            <div class="tab-pane active" id="entrada-tab">
                                <div class="products-section">
                                    <div class="section-header">
                                        <h3>Gerenciar Produtos</h3>
                                        <div class="search-box">
                                            <input type="text" id="product-search" placeholder="Buscar produto...">
                                            <i class="fas fa-search"></i>
                                        </div>
                                    </div>
                                    <div class="products-list" id="products-list">
                                        <!-- Lista será carregada dinamicamente -->
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Aba Saída -->
                            <div class="tab-pane" id="saida-tab">
                                <div class="withdrawal-section">
                                    <div class="section-header">
                                        <h3>Retirar Produtos</h3>
                                        <div class="search-box">
                                            <input type="text" id="withdrawal-search" placeholder="Buscar produto para retirar...">
                                            <i class="fas fa-search"></i>
                                        </div>
                                    </div>
                                    <div class="withdrawal-list" id="withdrawal-list">
                                        <!-- Lista será carregada dinamicamente -->
                                    </div>
                                </div>
                            </div>

                            <!-- Aba Histórico -->
                            <div class="tab-pane" id="historico-tab">
                                <div class="history-section">
                                    <div class="section-header">
                                        <h3>Histórico de Movimentações</h3>
                                        <div class="history-filters">
                                            <select id="history-type-filter">
                                                <option value="">Todos os tipos</option>
                                                <option value="entrada">Entradas</option>
                                                <option value="saida">Saídas</option>
                                            </select>
                                            <select id="history-product-filter">
                                                <option value="">Todos os produtos</option>
                                            </select>
                                            <input type="date" id="history-date-from" placeholder="Data inicial">
                                            <input type="date" id="history-date-to" placeholder="Data final">
                                            <button class="btn btn-secondary" id="clear-history-filters">
                                                <i class="fas fa-times"></i>
                                                Limpar
                                            </button>
                                        </div>
                                    </div>
                                    <div class="history-list" id="history-list">
                                        <!-- Histórico será carregado aqui -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Financeiro -->
                <div class="page-content" id="financeiro-page">
                    <div class="page-header">
                        <h2>Financeiro</h2>
                        <div class="date-filters">
                            <div class="filter-group">
                                <label for="finance-date-from">Data Início</label>
                                <input type="date" id="finance-date-from" placeholder="dd/mm/aaaa">
                            </div>
                            <div class="filter-group">
                                <label for="finance-date-to">Data Fim</label>
                                <input type="date" id="finance-date-to" placeholder="dd/mm/aaaa">
                            </div>
                            <button class="btn btn-primary" id="filter-finance-dates">
                                <i class="fas fa-search"></i>
                                Filtrar
                            </button>
                            <button class="btn btn-secondary" id="clear-date-filters">
                                <i class="fas fa-times"></i>
                                Limpar
                            </button>
                        </div>
                    </div>

                    <!-- Cards de Estatísticas -->
                    <div class="finance-stats">
                        <div class="stat-card revenue">
                            <div class="stat-icon">
                                <i class="fas fa-arrow-up"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-revenue">R$ 0,00</h3>
                                <p>Total de Receita</p>
                            </div>
                        </div>
                        <div class="stat-card expenses">
                            <div class="stat-icon">
                                <i class="fas fa-arrow-down"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-expenses">R$ 0,00</h3>
                                <p>Total de Gastos</p>
                            </div>
                        </div>
                        <div class="stat-card profit">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-profit">R$ 0,00</h3>
                                <p>Lucro Total</p>
                            </div>
                        </div>
                    </div>

                    <!-- Gráfico de Evolução -->
                    <div class="chart-section">
                        <h3>Evolução Financeira</h3>
                        <div class="chart-container">
                            <canvas id="financeChart" width="400" height="200"></canvas>
                        </div>
                    </div>

                    <!-- Abas de Financeiro -->
                    <div class="finance-tabs">
                        <div class="tab-buttons">
                            <button class="tab-btn active" data-tab="receitas">
                                <i class="fas fa-plus-circle"></i>
                                <span>Receitas</span>
                            </button>
                            <button class="tab-btn" data-tab="gastos">
                                <i class="fas fa-minus-circle"></i>
                                <span>Gastos</span>
                            </button>
                            <button class="tab-btn" data-tab="maquininha">
                                <i class="fas fa-credit-card"></i>
                                <span>Maquininha</span>
                            </button>
                            <button class="tab-btn" data-tab="historico-financeiro">
                                <i class="fas fa-history"></i>
                                <span>Histórico</span>
                            </button>
                            <button class="btn btn-primary" id="add-revenue-btn">
                                <i class="fas fa-plus"></i>
                                <span>Nova Receita</span>
                            </button>
                        </div>
                        
                        <!-- Conteúdo das Abas -->
                        <div class="tab-content">
                            <!-- Aba Receitas -->
                            <div class="tab-pane active" id="receitas-tab">
                                <div class="revenue-section">
                                    <div class="section-header">
                                        <h3>Gerenciar Receitas</h3>
                                        <div class="search-box">
                                            <i class="fas fa-search"></i>
                                            <input type="text" id="revenue-search" placeholder="Buscar receita...">
                                        </div>
                                    </div>
                                    <div class="revenue-list" id="revenue-list">
                                        <!-- Lista será carregada dinamicamente -->
                                    </div>
                                </div>
                            </div>

                            <!-- Aba Gastos -->
                            <div class="tab-pane" id="gastos-tab">
                                <div class="expenses-section">
                                    <div class="section-header">
                                        <h3>Gerenciar Gastos</h3>
                                        <div class="search-box">
                                            <i class="fas fa-search"></i>
                                            <input type="text" id="expenses-search" placeholder="Buscar gasto...">
                                        </div>
                                    </div>
                                    <div class="expenses-list" id="expenses-list">
                                        <!-- Lista será carregada dinamicamente -->
                                    </div>
                                </div>
                            </div>

                            <!-- Aba Maquininha -->
                            <div class="tab-pane" id="maquininha-tab">
                                <div class="pos-section">
                                    <div class="section-header">
                                        <h3>Gerenciar Maquininhas</h3>
                                        <div class="pos-actions">
                                            <button class="btn btn-success" id="add-pos-btn">
                                                <i class="fas fa-plus"></i>
                                                Nova Maquininha
                                            </button>
                                            <button class="btn btn-primary" id="add-sale-btn">
                                                <i class="fas fa-shopping-cart"></i>
                                                Nova Venda
                                            </button>
                                        </div>
                                    </div>
                                    <div class="pos-list" id="pos-list">
                                        <!-- Lista será carregada dinamicamente -->
                                    </div>
                                </div>
                            </div>

                            <!-- Aba Histórico Financeiro -->
                            <div class="tab-pane" id="historico-financeiro-tab">
                                <div class="finance-history-section">
                                    <div class="section-header">
                                        <h3>Histórico Financeiro</h3>
                                        <div class="history-filters">
                                            <select id="finance-history-type-filter">
                                                <option value="">Todos os tipos</option>
                                                <option value="receita">Receitas</option>
                                                <option value="gasto">Gastos</option>
                                                <option value="venda">Vendas</option>
                                            </select>
                                            <input type="date" id="finance-history-date-from" placeholder="Data inicial">
                                            <input type="date" id="finance-history-date-to" placeholder="Data final">
                                            <button class="btn btn-secondary" id="clear-finance-history-filters">
                                                <i class="fas fa-times"></i>
                                                Limpar
                                            </button>
                                        </div>
                                    </div>
                                    <div class="finance-history-list" id="finance-history-list">
                                        <!-- Histórico será carregado aqui -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profissionais -->
                <div class="page-content" id="profissionais-page">
                    <div class="page-header">
                        <h2>Profissionais</h2>
                        <button class="btn btn-primary" id="add-professional-btn">
                            <i class="fas fa-plus"></i>
                            Novo Profissional
                        </button>
                    </div>

                    <!-- Cards de Estatísticas -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-professionals">0</h3>
                                <p>Total</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon active">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="active-professionals">0</h3>
                                <p>Ativo</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon inactive">
                                <i class="fas fa-user-times"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="inactive-professionals">0</h3>
                                <p>Inativo</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon vacation">
                                <i class="fas fa-umbrella-beach"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="vacation-professionals">0</h3>
                                <p>Férias</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon leave">
                                <i class="fas fa-user-clock"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="leave-professionals">0</h3>
                                <p>Licença</p>
                            </div>
                        </div>
                    </div>

                    <!-- Lista de Profissionais -->
                    <div class="professionals-section">
                        <div class="section-header">
                            <h3>Lista de Profissionais</h3>
                            <div class="search-box">
                                <input type="text" id="professional-search" placeholder="Buscar profissional...">
                                <i class="fas fa-search"></i>
                            </div>
                        </div>
                        <div class="professionals-list" id="professionals-list">
                            <!-- Lista será carregada dinamicamente -->
                        </div>
                    </div>
                </div>

                <!-- Serviços -->
                <div class="page-content" id="servicos-page">
                    <div class="page-header">
                        <h2>Serviços</h2>
                        <button class="btn btn-primary" id="add-service-btn">
                            <i class="fas fa-plus"></i>
                            Novo Serviço
                        </button>
                    </div>

                    <!-- Cards de Estatísticas -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-cogs"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-services">0</h3>
                                <p>Total de Serviços</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon active">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="active-services">0</h3>
                                <p>Serviços Ativos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon inactive">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="inactive-services">0</h3>
                                <p>Serviços Inativos</p>
                            </div>
                        </div>
                    </div>

                    <!-- Lista de Serviços -->
                    <div class="services-section">
                        <div class="section-header">
                            <h3>Lista de Serviços</h3>
                            <div class="search-box">
                                <input type="text" id="service-search" placeholder="Buscar serviço...">
                                <i class="fas fa-search"></i>
                            </div>
                        </div>
                        <div class="services-list" id="services-list">
                            <!-- Lista será carregada dinamicamente -->
                        </div>
                    </div>
                </div>

                <!-- Relatórios -->
                <div class="page-content" id="relatorios-page">
                    <div class="page-header">
                        <h2>Relatórios</h2>
                        <button class="btn btn-primary">
                            <i class="fas fa-download"></i>
                            Gerar Relatório
                        </button>
                    </div>
                    <div class="empty-state">
                        <i class="fas fa-chart-bar"></i>
                        <h3>Relatórios em desenvolvimento</h3>
                        <p>Esta funcionalidade será implementada em breve.</p>
                    </div>
                </div>

                <!-- Configurações -->
                <div class="page-content" id="configuracoes-page">
                    <div class="page-header">
                        <h2>Configurações</h2>
                    </div>
                    
                    <!-- Abas de Configurações -->
                    <div class="config-tabs">
                        <div class="tab-buttons">
                            <button class="tab-btn active" data-tab="geral">
                                <i class="fas fa-building"></i>
                                <span>Geral</span>
                            </button>
                            <button class="tab-btn" data-tab="usuarios">
                                <i class="fas fa-users"></i>
                                <span>Usuários</span>
                            </button>
                            <button class="tab-btn" data-tab="whatsapp">
                                <i class="fab fa-whatsapp"></i>
                                <span>WhatsApp</span>
                            </button>
                            <button class="tab-btn" data-tab="backup">
                                <i class="fas fa-database"></i>
                                <span>Backup/Manutenção</span>
                            </button>
                        </div>
                        
                        <!-- Conteúdo das Abas -->
                        <div class="tab-content">
                            <!-- Aba Geral -->
                            <div class="tab-pane active" id="geral-tab">
                                <div class="config-section">
                                    <h3>Dados da Empresa</h3>
                                    <form class="config-form">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="empresa-nome">Nome da Empresa</label>
                                                <input type="text" id="empresa-nome" placeholder="Digite o nome da empresa">
                                            </div>
                                            <div class="form-group">
                                                <label for="empresa-cnpj">CNPJ</label>
                                                <input type="text" id="empresa-cnpj" placeholder="00.000.000/0000-00">
                                            </div>
                                            <div class="form-group">
                                                <label for="empresa-whatsapp">WhatsApp</label>
                                                <input type="text" id="empresa-whatsapp" placeholder="(11) 99999-9999">
                                            </div>
                                        </div>
                                        
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="empresa-cep">CEP</label>
                                                <input type="text" id="empresa-cep" placeholder="00000-000">
                                            </div>
                                            <div class="form-group">
                                                <label for="empresa-rua">Rua</label>
                                                <input type="text" id="empresa-rua" placeholder="Nome da rua">
                                            </div>
                                            <div class="form-group">
                                                <label for="empresa-numero">Número</label>
                                                <input type="text" id="empresa-numero" placeholder="123">
                                            </div>
                                        </div>
                                        
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="empresa-bairro">Bairro</label>
                                                <input type="text" id="empresa-bairro" placeholder="Nome do bairro">
                                            </div>
                                            <div class="form-group">
                                                <label for="empresa-cidade">Cidade</label>
                                                <input type="text" id="empresa-cidade" placeholder="Nome da cidade">
                                            </div>
                                            <div class="form-group">
                                                <label for="empresa-estado">Estado</label>
                                                <select id="empresa-estado">
                                                    <option value="">Selecione o estado</option>
                                                    <option value="AC">Acre</option>
                                                    <option value="AL">Alagoas</option>
                                                    <option value="AP">Amapá</option>
                                                    <option value="AM">Amazonas</option>
                                                    <option value="BA">Bahia</option>
                                                    <option value="CE">Ceará</option>
                                                    <option value="DF">Distrito Federal</option>
                                                    <option value="ES">Espírito Santo</option>
                                                    <option value="GO">Goiás</option>
                                                    <option value="MA">Maranhão</option>
                                                    <option value="MT">Mato Grosso</option>
                                                    <option value="MS">Mato Grosso do Sul</option>
                                                    <option value="MG">Minas Gerais</option>
                                                    <option value="PA">Pará</option>
                                                    <option value="PB">Paraíba</option>
                                                    <option value="PR">Paraná</option>
                                                    <option value="PE">Pernambuco</option>
                                                    <option value="PI">Piauí</option>
                                                    <option value="RJ">Rio de Janeiro</option>
                                                    <option value="RN">Rio Grande do Norte</option>
                                                    <option value="RS">Rio Grande do Sul</option>
                                                    <option value="RO">Rondônia</option>
                                                    <option value="RR">Roraima</option>
                                                    <option value="SC">Santa Catarina</option>
                                                    <option value="SP">São Paulo</option>
                                                    <option value="SE">Sergipe</option>
                                                    <option value="TO">Tocantins</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div class="form-actions">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save"></i>
                                                Salvar Dados
                                            </button>
                                        </div>
                                    </form>
                                </div>
                                
                                <div class="config-section">
                                    <h3>Horário de Funcionamento</h3>
                                    <form class="config-form">
                                        <div class="horario-grid">
                                            <div class="dia-config">
                                                <h4>Segunda a Sexta</h4>
                                                <div class="form-row">
                                                    <div class="form-group">
                                                        <label>Abertura</label>
                                                        <input type="time" id="weekdays-open" value="08:00">
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Fechamento</label>
                                                        <input type="time" id="weekdays-close" value="18:00">
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="dia-config">
                                                <h4>Sábado</h4>
                                                <div class="form-row">
                                                    <div class="form-group">
                                                        <label>Abertura</label>
                                                        <input type="time" id="saturday-open" value="08:00">
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Fechamento</label>
                                                        <input type="time" id="saturday-close" value="12:00">
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="checkbox-label">
                                                        <input type="checkbox" id="saturday-enabled" checked>
                                                        <span class="checkmark"></span>
                                                        Funciona aos sábados
                                                    </label>
                                                </div>
                                            </div>
                                            
                                            <div class="dia-config">
                                                <h4>Domingo</h4>
                                                <div class="form-row">
                                                    <div class="form-group">
                                                        <label>Abertura</label>
                                                        <input type="time" id="sunday-open" value="08:00">
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Fechamento</label>
                                                        <input type="time" id="sunday-close" value="12:00">
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="checkbox-label">
                                                        <input type="checkbox" id="sunday-enabled">
                                                        <span class="checkmark"></span>
                                                        Funciona aos domingos
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-actions">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-clock"></i>
                                                Salvar Horários
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            
                            <!-- Aba Usuários -->
                            <div class="tab-pane" id="usuarios-tab">
                                <div class="config-section">
                                    <div class="section-header">
                                        <h3>Gerenciar Usuários</h3>
                                        <button class="btn btn-primary" id="add-user-btn">
                                            <i class="fas fa-plus"></i>
                                            Novo Usuário
                                        </button>
                                    </div>
                                    
                                    <div class="users-list">
                                        <div class="user-card">
                                            <div class="user-avatar">
                                                <img src="/assets/Logo.png" alt="Usuário">
                                            </div>
                                            <div class="user-info">
                                                <h4>Administrador</h4>
                                                <p>admin@chstudio.com</p>
                                                <span class="user-role">Administrador</span>
                                            </div>
                                            <div class="user-actions">
                                                <button class="btn-icon" title="Editar">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn-icon" title="Excluir">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Aba WhatsApp -->
                            <div class="tab-pane" id="whatsapp-tab">
                                <div class="config-section">
                                    <h3>Integração WhatsApp</h3>
                                    <div class="whatsapp-status" id="whatsapp-status">
                                        <div class="status-indicator">
                                            <span class="status-dot disconnected"></span>
                                            <span class="status-text">Desconectado</span>
                                        </div>
                                    </div>
                                    
                                    <div class="qr-code-container" id="qr-code-container">
                                        <div class="qr-code-placeholder">
                                            <i class="fab fa-whatsapp"></i>
                                            <p>QR Code aparecerá aqui</p>
                                        </div>
                                    </div>
                                    
                                    <div class="whatsapp-actions">
                                        <button class="btn btn-primary" id="connect-whatsapp">
                                            <i class="fas fa-qrcode"></i>
                                            Conectar WhatsApp
                                        </button>
                                        <button class="btn btn-success" id="generate-qr" style="display: none;">
                                            <i class="fas fa-qrcode"></i>
                                            Gerar QR Code
                                        </button>
                                        <button class="btn btn-secondary" id="disconnect-whatsapp" style="display: none;">
                                            <i class="fas fa-disconnect"></i>
                                            Desconectar
                                        </button>
                                        <button class="btn btn-success" id="send-test-message" style="display: none;">
                                            <i class="fas fa-paper-plane"></i>
                                            Enviar Teste
                                        </button>
                                        <button class="btn btn-info" id="send-automatic-message" style="display: none;">
                                            <i class="fas fa-robot"></i>
                                            Testar Automática
                                        </button>
                                        <button class="btn btn-warning" id="test-connection" style="display: none;">
                                            <i class="fas fa-wifi"></i>
                                            Testar Conexão
                                        </button>
                                    </div>
                                    
                                    <div id="client-info" style="display: none;"></div>
                                    
                                    <div class="config-section">
                                        <h4>Mensagens Automáticas</h4>
                                        <form class="config-form">
                                            <div class="form-group">
                                                <label for="welcome-message">Mensagem de Boas-vindas</label>
                                                <textarea id="welcome-message" rows="4" placeholder="Digite a mensagem de boas-vindas..."></textarea>
                                            </div>
                                            <div class="form-group">
                                                <label for="msg-fora-horario">Mensagem de Fora do Horário</label>
                                                <textarea id="msg-fora-horario" rows="4" placeholder="Digite a mensagem para fora do horário de funcionamento..."></textarea>
                                            </div>
                                            <div class="form-actions">
                                                <button type="button" class="btn btn-primary" id="save-welcome-message">
                                                    <i class="fas fa-save"></i>
                                                    Salvar Mensagens
                                                </button>
                                            </div>
                                        </form>
                                    </div>

                                    <!-- Fluxo Automático -->
                                    <div class="config-section">
                                        <h4>Fluxo Automático</h4>
                                        <div class="whatsapp-status">
                                            <div class="status-indicator">
                                                <span class="status-dot disconnected"></span>
                                                <span class="status-text">Em Desenvolvimento</span>
                                            </div>
                                        </div>
                                        <div class="coming-soon-simple">
                                            <i class="fas fa-cogs"></i>
                                            <span>Funcionalidade em desenvolvimento</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Aba Backup/Manutenção -->
                            <div class="tab-pane" id="backup-tab">
                                <div class="config-section">
                                    <h3>Backup e Manutenção</h3>
                                    
                                    <div class="backup-actions">
                                        <button class="btn btn-primary" id="create-backup">
                                            <i class="fas fa-download"></i>
                                            Criar Backup
                                        </button>
                                        <button class="btn btn-success" id="import-backup">
                                            <i class="fas fa-upload"></i>
                                            Importar Backup
                                        </button>
                                        <button class="btn btn-warning" id="maintenance-db">
                                            <i class="fas fa-tools"></i>
                                            Manutenção do Banco
                                        </button>
                                    </div>
                                    
                                    <!-- Input oculto para upload de arquivo -->
                                    <input type="file" id="backup-file-input" accept=".zip" style="display: none;">
                                    
                                    <div class="backup-filters">
                                        <h4>Filtrar Backups</h4>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="start-date">Data Início</label>
                                                <input type="date" id="start-date">
                                            </div>
                                            <div class="form-group">
                                                <label for="end-date">Data Fim</label>
                                                <input type="date" id="end-date">
                                            </div>
                                            <div class="form-group">
                                                <button class="btn btn-primary" id="filter-backups">
                                                    <i class="fas fa-search"></i>
                                                    Filtrar
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="backup-list-section">
                                        <h4>Backups Disponíveis</h4>
                                        <div class="backup-table-container">
                                            <table class="backup-table" id="backup-table">
                                                <thead>
                                                    <tr>
                                                        <th>Nome do Backup</th>
                                                        <th>Data de Criação</th>
                                                        <th>Tamanho</th>
                                                        <th>Coleções</th>
                                                        <th>Status</th>
                                                        <th>Ações</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="backup-list">
                                                    <tr class="loading-row">
                                                        <td colspan="6" class="loading">
                                                            <i class="fas fa-spinner fa-spin"></i>
                                                            Carregando backups...
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal de Usuário -->
    <div class="modal" id="userModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Novo Usuário</h3>
                <button class="modal-close" id="closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="userForm" class="config-form">
                    <input type="hidden" id="userId" value="">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="modalUserName">Nome Completo</label>
                            <input type="text" id="modalUserName" placeholder="Digite o nome completo" required>
                        </div>
                        <div class="form-group">
                            <label for="modalUserRole">Função</label>
                            <select id="modalUserRole" required>
                                <option value="user">Usuário</option>
                                <option value="admin">Administrador</option>
                                <option value="manager">Gerente</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="modalUserEmail">Email</label>
                            <input type="email" id="modalUserEmail" placeholder="Digite o email" required>
                        </div>
                        <div class="form-group">
                            <label for="modalUserPassword">Senha</label>
                            <input type="password" id="modalUserPassword" placeholder="Digite a senha" required>
                        </div>
                    </div>
                    
                    <div class="form-group avatar-section">
                        <label for="userAvatar">Foto do Usuário</label>
                        <div class="avatar-upload">
                            <div class="avatar-preview" id="avatarPreview">
                                <i class="fas fa-user"></i>
                            </div>
                            <input type="file" id="userAvatar" accept="image/*" style="display: none;">
                            <button type="button" class="btn btn-secondary" onclick="document.getElementById('userAvatar').click()">
                                <i class="fas fa-camera"></i>
                                Escolher Foto
                            </button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelBtn">Cancelar</button>
                <button type="button" class="btn btn-primary" id="saveUserBtn">
                    <i class="fas fa-save"></i>
                    Salvar Usuário
                </button>
            </div>
        </div>
    </div>

    <!-- Socket.IO -->
    <script src="/socket.io/socket.io.js"></script>
    
    <!-- Modal de Profissional -->
    <div class="modal" id="professionalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="professionalModalTitle">Novo Profissional</h3>
                <span class="close" id="closeProfessionalModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="professionalForm" enctype="multipart/form-data">
                    <input type="hidden" id="professionalId" name="id">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="professionalPhoto">Foto do Profissional</label>
                            <div class="photo-upload">
                                <input type="file" id="professionalPhoto" name="photo" accept="image/*">
                                <div class="photo-preview" id="photoPreview">
                                    <i class="fas fa-user"></i>
                                    <span>Clique para adicionar foto</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="professionalStatus">Status</label>
                            <select id="professionalStatus" name="status" required>
                                <option value="active">Ativo</option>
                                <option value="inactive">Inativo</option>
                                <option value="vacation">Férias</option>
                                <option value="leave">Licença</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="professionalFirstName">Nome</label>
                            <input type="text" id="professionalFirstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="professionalLastName">Sobrenome</label>
                            <input type="text" id="professionalLastName" name="lastName" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="professionalContact">Contato</label>
                            <input type="tel" id="professionalContact" name="contact" placeholder="(11) 99999-9999">
                        </div>
                        <div class="form-group">
                            <label for="professionalEmail">Email</label>
                            <input type="email" id="professionalEmail" name="email">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="professionalAddress">Endereço</label>
                        <textarea id="professionalAddress" name="address" rows="3" placeholder="Rua, número, bairro, cidade - UF"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="professionalFunction">Função</label>
                            <input type="text" id="professionalFunction" name="function" placeholder="Ex: Cabeleireiro, Manicure, etc.">
                        </div>
                        <div class="form-group">
                            <label for="professionalDailyCapacity">Atendimentos por Dia</label>
                            <input type="number" id="professionalDailyCapacity" name="dailyCapacity" min="1" max="50" placeholder="Ex: 10">
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="createUserAccount" name="createUserAccount">
                            <label for="createUserAccount">Tornar este profissional um usuário do sistema</label>
                        </div>
                    </div>

                    <div id="userCredentialsSection" style="display: none;">
                        <h4>Credenciais de Acesso</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="userEmail">Email de Acesso</label>
                                <input type="email" id="userEmail" name="userEmail" placeholder="usuario@email.com" required>
                            </div>
                            <div class="form-group">
                                <label for="userPassword">Senha</label>
                                <input type="password" id="userPassword" name="userPassword" placeholder="Mínimo 6 caracteres" required>
                            </div>
                        </div>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancelProfessional">Cancelar</button>
                        <button type="submit" class="btn btn-primary" id="saveProfessional">Salvar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Serviço -->
    <div class="modal" id="serviceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="serviceModalTitle">Novo Serviço</h3>
                <span class="close" id="closeServiceModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="serviceForm">
                    <input type="hidden" id="serviceId" name="id">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="serviceName">Nome do Serviço</label>
                            <input type="text" id="serviceName" name="name" required placeholder="Ex: Corte de Cabelo">
                        </div>
                        <div class="form-group">
                            <label for="serviceStatus">Status</label>
                            <select id="serviceStatus" name="status" required>
                                <option value="active">Ativo</option>
                                <option value="inactive">Inativo</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="serviceDuration">Tempo do Serviço</label>
                            <div class="duration-input">
                                <input type="number" id="serviceDuration" name="duration" min="1" required placeholder="30">
                                <select id="serviceDurationUnit" name="durationUnit" required>
                                    <option value="minutes">Minutos</option>
                                    <option value="hours">Horas</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="servicePrice">Valor do Serviço (R$)</label>
                            <input type="number" id="servicePrice" name="price" step="0.01" min="0" required placeholder="50.00">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="serviceCommission">Percentual de Comissão (%)</label>
                            <input type="number" id="serviceCommission" name="commission" min="0" max="100" step="0.01" required placeholder="30.00">
                        </div>
                        <div class="form-group">
                            <label for="serviceDescription">Descrição</label>
                            <textarea id="serviceDescription" name="description" rows="3" placeholder="Descrição do serviço..."></textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Profissionais Aptos</label>
                        <div class="professionals-checkbox-list" id="professionals-checkbox-list">
                            <!-- Lista será carregada dinamicamente -->
                        </div>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancelService">Cancelar</button>
                        <button type="submit" class="btn btn-primary" id="saveService">Salvar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Produto -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">Novo Produto</h3>
                <span class="close" id="closeProductModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="productForm" enctype="multipart/form-data">
                    <input type="hidden" id="productId" name="id">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="productPhotoUrl">Foto do Produto</label>
                            <div class="photo-upload">
                                <input type="url" id="productPhotoUrl" name="photoUrl" placeholder="https://exemplo.com/imagem.jpg">
                                <div class="photo-preview" id="productPhotoPreview">
                                    <i class="fas fa-image"></i>
                                    <span>Digite o link da imagem</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="productStatus">Status</label>
                            <select id="productStatus" name="status" required>
                                <option value="active">Ativo</option>
                                <option value="inactive">Inativo</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="productName">Nome do Produto</label>
                            <input type="text" id="productName" name="name" required placeholder="Ex: Shampoo Hidratante">
                        </div>
                        <div class="form-group">
                            <label for="productCategory">Categoria</label>
                            <input type="text" id="productCategory" name="category" placeholder="Ex: Cabelo, Pele, etc.">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="productQuantity">Quantidade em Estoque</label>
                            <input type="number" id="productQuantity" name="quantity" min="0" required placeholder="0">
                        </div>
                        <div class="form-group">
                            <label for="productMinQuantity">Quantidade Mínima</label>
                            <input type="number" id="productMinQuantity" name="minQuantity" min="0" required placeholder="5">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="productPrice">Preço de Compra (R$)</label>
                            <input type="number" id="productPrice" name="price" step="0.01" min="0" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label for="productSupplier">Fornecedor</label>
                            <input type="text" id="productSupplier" name="supplier" placeholder="Nome do fornecedor">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="productDescription">Descrição</label>
                        <textarea id="productDescription" name="description" rows="3" placeholder="Descrição do produto..."></textarea>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancelProduct">Cancelar</button>
                        <button type="submit" class="btn btn-primary" id="saveProduct">Salvar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Adicionar Itens -->
    <div class="modal" id="addItemsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Adicionar Itens</h3>
                <span class="close" id="closeAddItemsModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="addItemsForm">
                    <input type="hidden" id="addItemsProductId">
                    
                    <div class="product-info">
                        <div class="product-photo">
                            <img id="addItemsProductPhoto" src="" alt="Produto">
                        </div>
                        <div class="product-details">
                            <h4 id="addItemsProductName"></h4>
                            <p id="addItemsProductCategory"></p>
                            <p>Estoque atual: <span id="addItemsCurrentStock"></span></p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="addItemsQuantity">Quantidade a Adicionar</label>
                        <input type="number" id="addItemsQuantity" name="quantity" min="1" required placeholder="1">
                    </div>

                    <div class="form-group">
                        <label for="addItemsReason">Motivo da Entrada</label>
                        <select id="addItemsReason" name="reason" required>
                            <option value="">Selecione o motivo</option>
                            <option value="compra">Compra/Reposição</option>
                            <option value="devolucao">Devolução</option>
                            <option value="ajuste">Ajuste de Estoque</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="addItemsNotes">Observações</label>
                        <textarea id="addItemsNotes" name="notes" rows="3" placeholder="Observações adicionais..."></textarea>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancelAddItems">Cancelar</button>
                        <button type="submit" class="btn btn-primary" id="confirmAddItems">Confirmar Entrada</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Retirada -->
    <div class="modal" id="withdrawalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Retirar Produto</h3>
                <span class="close" id="closeWithdrawalModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="withdrawalForm">
                    <input type="hidden" id="withdrawalProductId">
                    
                    <div class="product-info">
                        <div class="product-photo">
                            <img id="withdrawalProductPhoto" src="" alt="Produto">
                        </div>
                        <div class="product-details">
                            <h4 id="withdrawalProductName"></h4>
                            <p id="withdrawalProductCategory"></p>
                            <p>Estoque atual: <span id="withdrawalCurrentStock"></span></p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="withdrawalQuantity">Quantidade a Retirar</label>
                        <input type="number" id="withdrawalQuantity" name="quantity" min="1" required placeholder="1">
                    </div>

                    <div class="form-group">
                        <label for="withdrawalReason">Motivo da Retirada</label>
                        <select id="withdrawalReason" name="reason" required>
                            <option value="">Selecione o motivo</option>
                            <option value="venda">Venda</option>
                            <option value="uso_interno">Uso Interno</option>
                            <option value="perda">Perda/Dano</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="withdrawalNotes">Observações</label>
                        <textarea id="withdrawalNotes" name="notes" rows="3" placeholder="Observações adicionais..."></textarea>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancelWithdrawal">Cancelar</button>
                        <button type="submit" class="btn btn-primary" id="confirmWithdrawal">Confirmar Retirada</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ==================== MODAIS FINANCEIROS ==================== -->

    <!-- Modal de Receita -->
    <div class="modal" id="revenue-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="revenue-modal-title">Nova Receita</h3>
                <button class="close-btn" onclick="closeRevenueModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="revenue-form">
                    <div class="form-group">
                        <label for="revenue-name">Nome da Receita *</label>
                        <input type="text" id="revenue-name" name="name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="revenue-type">Tipo *</label>
                        <select id="revenue-type" name="type" required>
                            <option value="">Selecione o tipo</option>
                            <option value="unique">Única</option>
                            <option value="fixed">Fixa</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="revenue-value">Valor *</label>
                        <input type="number" id="revenue-value" name="value" step="0.01" min="0" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="revenue-description">Descrição</label>
                        <textarea id="revenue-description" name="description" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeRevenueModal()">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="saveRevenue()">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Gasto -->
    <div class="modal" id="expense-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="expense-modal-title">Novo Gasto</h3>
                <button class="close-btn" onclick="closeExpenseModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="expense-form">
                    <div class="form-group">
                        <label for="expense-name">Nome do Gasto *</label>
                        <input type="text" id="expense-name" name="name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="expense-type">Tipo *</label>
                        <select id="expense-type" name="type" required onchange="toggleInstallments()">
                            <option value="">Selecione o tipo</option>
                            <option value="unique">Única</option>
                            <option value="installment">Parcelado</option>
                            <option value="fixed">Fixo</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="expense-value">Valor *</label>
                        <input type="number" id="expense-value" name="value" step="0.01" min="0" required>
                    </div>
                    
                    <div class="form-group" id="installments-group" style="display: none;">
                        <label for="expense-installments">Número de Parcelas</label>
                        <input type="number" id="expense-installments" name="totalInstallments" min="2" max="60">
                    </div>
                    
                    <div class="form-group">
                        <label for="expense-description">Descrição</label>
                        <textarea id="expense-description" name="description" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeExpenseModal()">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="saveExpense()">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Maquininha -->
    <div class="modal" id="pos-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="pos-modal-title">Nova Maquininha</h3>
                <button class="close-btn" onclick="closePosModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="pos-form">
                    <div class="form-group">
                        <label for="pos-photo">Foto (URL)</label>
                        <div class="photo-upload">
                            <div class="photo-preview" id="pos-photo-preview">
                                <i class="fas fa-credit-card"></i>
                                <span>Nenhuma imagem selecionada</span>
                            </div>
                            <input type="url" id="pos-photo" name="photo" placeholder="https://exemplo.com/foto.jpg" onchange="handlePosPhotoUrlChange()">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="pos-name">Nome da Maquininha *</label>
                        <input type="text" id="pos-name" name="name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="pos-rate">Taxa (%) *</label>
                        <input type="number" id="pos-rate" name="rate" step="0.01" min="0" max="100" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="pos-description">Descrição</label>
                        <textarea id="pos-description" name="description" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closePosModal()">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="savePos()">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Venda -->
    <div class="modal" id="sale-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nova Venda</h3>
                <button class="close-btn" onclick="closeSaleModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="sale-form">
                    <div class="form-group">
                        <label for="sale-pos">Maquininha *</label>
                        <select id="sale-pos" name="posMachineId" required>
                            <option value="">Selecione a maquininha</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="sale-value">Valor da Venda *</label>
                        <input type="number" id="sale-value" name="value" step="0.01" min="0" required onchange="calculateProfit()">
                    </div>
                    
                    <div class="form-group">
                        <label for="sale-professional">Profissional *</label>
                        <select id="sale-professional" name="professionalId" required>
                            <option value="">Selecione o profissional</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="sale-commission">Comissão do Profissional (%)</label>
                        <input type="number" id="sale-commission" name="professionalCommission" step="0.01" min="0" max="100" required onchange="calculateProfit()">
                    </div>
                    
                    <div class="form-group">
                        <label for="sale-description">Descrição</label>
                        <textarea id="sale-description" name="description" rows="3"></textarea>
                    </div>
                    
                    <!-- Resultado do cálculo -->
                    <div class="sale-result" id="sale-result" style="display: none;">
                        <h4>Resumo da Venda</h4>
                        <div class="result-item">
                            <span>Valor da Venda:</span>
                            <span id="result-sale-value">R$ 0,00</span>
                        </div>
                        <div class="result-item">
                            <span>Taxa da Maquininha:</span>
                            <span id="result-pos-fee">R$ 0,00</span>
                        </div>
                        <div class="result-item">
                            <span>Comissão do Profissional:</span>
                            <span id="result-professional-commission">R$ 0,00</span>
                        </div>
                        <div class="result-item total">
                            <span>Lucro Líquido:</span>
                            <span id="result-net-profit">R$ 0,00</span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeSaleModal()">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="saveSale()">Registrar Venda</button>
            </div>
        </div>
    </div>

    <!-- Modal de Novo Agendamento -->
    <div class="modal" id="appointmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="appointmentModalTitle">Novo Agendamento</h3>
                <button class="modal-close" id="closeAppointmentModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="appointmentForm">
                    <input type="hidden" id="appointmentId" name="id">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="appointmentProfessional">Profissional *</label>
                            <select id="appointmentProfessional" name="professionalId" required>
                                <option value="">Selecione o profissional</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="appointmentService">Serviço *</label>
                            <select id="appointmentService" name="serviceId" required>
                                <option value="">Selecione o serviço</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="appointmentDate">Data *</label>
                            <input type="date" id="appointmentDate" name="date" required>
                        </div>
                        <div class="form-group">
                            <label for="appointmentTime">Horário *</label>
                            <select id="appointmentTime" name="time" required>
                                <option value="">Selecione o horário</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="appointmentClientName">Nome do Cliente *</label>
                            <input type="text" id="appointmentClientName" name="clientName" required placeholder="Digite o nome completo">
                        </div>
                        <div class="form-group">
                            <label for="appointmentClientPhone">WhatsApp *</label>
                            <input type="tel" id="appointmentClientPhone" name="clientPhone" required placeholder="(11) 99999-9999">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="appointmentNotes">Observações</label>
                        <textarea id="appointmentNotes" name="notes" rows="3" placeholder="Observações adicionais..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelAppointment">Cancelar</button>
                <button type="button" class="btn btn-primary" id="saveAppointment">
                    <i class="fas fa-save"></i>
                    Salvar Agendamento
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/whatsapp.js"></script>
    <script src="js/backup.js"></script>
    <script src="js/professionals.js"></script>
    <script src="js/services.js"></script>
    <script src="js/stock.js"></script>
    <script src="js/finance.js"></script>
    <script src="js/agenda.js"></script>
</body>
</html>
